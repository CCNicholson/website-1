---
title: "Cleaning the Lung function data"
output: html_document
---



<div id="import-the-raw-data" class="section level1">
<h1>Import the raw data</h1>
<p>Original data set did not have variable names included. Manually add them.</p>
<pre class="r"><code>fev &lt;- read.delim(&quot;Lungraw.txt&quot;, sep=&quot; &quot;, header=FALSE, stringsAsFactors = FALSE)
names(fev) &lt;- c(&quot;ID&quot;, &quot;AREA&quot;, &quot;FSEX&quot;, &quot;FAGE&quot;, &quot;FHEIGHT&quot;, &quot;FWEIGHT&quot;, &quot;FFVC&quot;, &quot;FFEV1&quot;, 
                            &quot;MSEX&quot;, &quot;MAGE&quot;, &quot;MHEIGHT&quot;, &quot;MWEIGHT&quot;, &quot;MFVC&quot;, &quot;MFEV1&quot;, 
                            &quot;OCSEX&quot;, &quot;OCAGE&quot;, &quot;OCHEIGHT&quot;, &quot;OCWEIGHT&quot;, &quot;OCFVC&quot;, &quot;OCFEV1&quot;,
                            &quot;MCSEX&quot;, &quot;MCAGE&quot;, &quot;MCHEIGHT&quot;, &quot;MCWEIGHT&quot;, &quot;MCFVC&quot;, &quot;MCFEV1&quot;,
                            &quot;YCSEX&quot;, &quot;YCAGE&quot;, &quot;YCHEIGHT&quot;, &quot;YCWEIGHT&quot;, &quot;YCFVC&quot;, &quot;YCFEV1&quot;)</code></pre>
<p>Use <code>str(fev)</code> to check to see if all the variables are the correct data types. Several numeric variables are being treated as character. Fix these. <a href="http://stackoverflow.com/questions/22772279/converting-multiple-columns-from-character-to-numeric-format-in-r">Link to the Stack Overflow post that I googled to find a solution</a></p>
<pre class="r"><code>str(fev)</code></pre>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  32 variables:
##  $ ID      : int  1 2 3 4 5 6 7 8 9 10 ...
##  $ AREA    : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ FSEX    : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ FAGE    : int  53 40 26 34 46 44 35 45 45 30 ...
##  $ FHEIGHT : int  61 72 69 68 61 72 64 69 68 66 ...
##  $ FWEIGHT : int  161 198 210 187 121 153 145 166 180 166 ...
##  $ FFVC    : int  391 441 445 433 354 610 345 484 489 550 ...
##  $ FFEV1   : int  323 395 347 374 290 491 339 419 429 449 ...
##  $ MSEX    : int  2 2 2 2 2 2 2 2 2 2 ...
##  $ MAGE    : int  43 38 27 36 39 36 27 45 41 26 ...
##  $ MHEIGHT : int  62 66 59 58 62 66 68 63 68 67 ...
##  $ MWEIGHT : int  136 160 114 123 128 125 206 115 144 156 ...
##  $ MFVC    : int  370 411 309 265 245 349 492 342 357 364 ...
##  $ MFEV1   : int  331 347 265 206 233 306 425 271 313 345 ...
##  $ OCSEX   : int  2 1 1 2 1 1 2 1 2 2 ...
##  $ OCAGE   : int  12 10 8 11 16 15 11 15 14 9 ...
##  $ OCHEIGHT: int  59 56 50 57 61 67 54 67 65 49 ...
##  $ OCWEIGHT: int  115 66 59 106 88 100 70 153 144 52 ...
##  $ OCFVC   : int  296 323 114 256 260 389 218 460 289 192 ...
##  $ OCFEV1  : int  279 239 111 185 247 355 163 388 272 142 ...
##  $ MCSEX   : chr  &quot;.&quot; &quot;.&quot; &quot;.&quot; &quot;1&quot; ...
##  $ MCAGE   : chr  &quot;.&quot; &quot;.&quot; &quot;.&quot; &quot;9&quot; ...
##  $ MCHEIGHT: chr  &quot;.&quot; &quot;.&quot; &quot;.&quot; &quot;49&quot; ...
##  $ MCWEIGHT: chr  &quot;.&quot; &quot;.&quot; &quot;.&quot; &quot;56&quot; ...
##  $ MCFVC   : chr  &quot;.&quot; &quot;.&quot; &quot;.&quot; &quot;159&quot; ...
##  $ MCFEV1  : chr  &quot;.&quot; &quot;.&quot; &quot;.&quot; &quot;130&quot; ...
##  $ YCSEX   : chr  &quot;.&quot; &quot;.&quot; &quot;.&quot; &quot;.&quot; ...
##  $ YCAGE   : chr  &quot;.&quot; &quot;.&quot; &quot;.&quot; &quot;.&quot; ...
##  $ YCHEIGHT: chr  &quot;.&quot; &quot;.&quot; &quot;.&quot; &quot;.&quot; ...
##  $ YCWEIGHT: chr  &quot;.&quot; &quot;.&quot; &quot;.&quot; &quot;.&quot; ...
##  $ YCFVC   : chr  &quot;.&quot; &quot;.&quot; &quot;.&quot; &quot;.&quot; ...
##  $ YCFEV1  : chr  &quot;.&quot; &quot;.&quot; &quot;.&quot; &quot;.&quot; ...</code></pre>
<pre class="r"><code>cols.num &lt;- c(&quot;MCSEX&quot;, &quot;MCAGE&quot;, &quot;MCHEIGHT&quot;, &quot;MCWEIGHT&quot;, &quot;MCFVC&quot;, &quot;MCFEV1&quot;,
              &quot;YCSEX&quot;, &quot;YCAGE&quot;, &quot;YCHEIGHT&quot;, &quot;YCWEIGHT&quot;, &quot;YCFVC&quot;, &quot;YCFEV1&quot;)
fev[cols.num] &lt;- sapply(fev[cols.num],as.numeric)
str(fev)</code></pre>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  32 variables:
##  $ ID      : int  1 2 3 4 5 6 7 8 9 10 ...
##  $ AREA    : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ FSEX    : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ FAGE    : int  53 40 26 34 46 44 35 45 45 30 ...
##  $ FHEIGHT : int  61 72 69 68 61 72 64 69 68 66 ...
##  $ FWEIGHT : int  161 198 210 187 121 153 145 166 180 166 ...
##  $ FFVC    : int  391 441 445 433 354 610 345 484 489 550 ...
##  $ FFEV1   : int  323 395 347 374 290 491 339 419 429 449 ...
##  $ MSEX    : int  2 2 2 2 2 2 2 2 2 2 ...
##  $ MAGE    : int  43 38 27 36 39 36 27 45 41 26 ...
##  $ MHEIGHT : int  62 66 59 58 62 66 68 63 68 67 ...
##  $ MWEIGHT : int  136 160 114 123 128 125 206 115 144 156 ...
##  $ MFVC    : int  370 411 309 265 245 349 492 342 357 364 ...
##  $ MFEV1   : int  331 347 265 206 233 306 425 271 313 345 ...
##  $ OCSEX   : int  2 1 1 2 1 1 2 1 2 2 ...
##  $ OCAGE   : int  12 10 8 11 16 15 11 15 14 9 ...
##  $ OCHEIGHT: int  59 56 50 57 61 67 54 67 65 49 ...
##  $ OCWEIGHT: int  115 66 59 106 88 100 70 153 144 52 ...
##  $ OCFVC   : int  296 323 114 256 260 389 218 460 289 192 ...
##  $ OCFEV1  : int  279 239 111 185 247 355 163 388 272 142 ...
##  $ MCSEX   : num  NA NA NA 1 2 1 NA 2 1 NA ...
##  $ MCAGE   : num  NA NA NA 9 12 13 NA 9 12 NA ...
##  $ MCHEIGHT: num  NA NA NA 49 60 57 NA 54 62 NA ...
##  $ MCWEIGHT: num  NA NA NA 56 85 87 NA 81 108 NA ...
##  $ MCFVC   : num  NA NA NA 159 268 276 NA 193 257 NA ...
##  $ MCFEV1  : num  NA NA NA 130 234 237 NA 187 235 NA ...
##  $ YCSEX   : num  NA NA NA NA 2 2 NA NA NA NA ...
##  $ YCAGE   : num  NA NA NA NA 10 10 NA NA NA NA ...
##  $ YCHEIGHT: num  NA NA NA NA 50 55 NA NA NA NA ...
##  $ YCWEIGHT: num  NA NA NA NA 53 72 NA NA NA NA ...
##  $ YCFVC   : num  NA NA NA NA 154 195 NA NA NA NA ...
##  $ YCFEV1  : num  NA NA NA NA 143 169 NA NA NA NA ...</code></pre>
<p>The FEV1 measurements were erroneously recoded in the data set at 100x their real value.</p>
<pre class="r"><code>fev[c(&quot;FFEV1&quot;, &quot;MFEV1&quot;, &quot;OCFEV1&quot;, &quot;MCFEV1&quot;, &quot;YCFEV1&quot;)] &lt;- fev[c(&quot;FFEV1&quot;, &quot;MFEV1&quot;, &quot;OCFEV1&quot;, &quot;MCFEV1&quot;, &quot;YCFEV1&quot;)]/100
head(fev$FFEV1)</code></pre>
<pre><code>## [1] 3.23 3.95 3.47 3.74 2.90 4.91</code></pre>
</div>
<div id="save-the-clean-data-as-a-tab-delimited-text-file." class="section level1">
<h1>Save the clean data as a tab-delimited text file.</h1>
<pre class="r"><code>date &lt;- format(Sys.Date(), &quot;%m%d%y&quot;)
filename &lt;- paste(&quot;Lung_&quot;, date, &quot;.txt&quot;, sep=&quot;&quot;)
write.table(fev, filename, sep=&quot;\t&quot;, row.names=FALSE)</code></pre>
</div>
<div id="session-info" class="section level1">
<h1>Session Info</h1>
<p>This document was compiled on 2017-08-10 22:06:31 and with the following system information:</p>
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>## R version 3.3.1 (2016-06-21)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 15063)
## 
## locale:
## [1] LC_COLLATE=English_United States.1252 
## [2] LC_CTYPE=English_United States.1252   
## [3] LC_MONETARY=English_United States.1252
## [4] LC_NUMERIC=C                          
## [5] LC_TIME=English_United States.1252    
## 
## attached base packages:
## [1] methods   stats     graphics  grDevices utils     datasets  base     
## 
## other attached packages:
## [1] rmarkdown_1.6 knitr_1.16   
## 
## loaded via a namespace (and not attached):
##  [1] backports_1.0.5 bookdown_0.4.1  magrittr_1.5    rprojroot_1.2  
##  [5] tools_3.3.1     htmltools_0.3.6 yaml_2.1.14     Rcpp_0.12.8    
##  [9] stringi_1.1.1   blogdown_0.0.50 stringr_1.2.0   digest_0.6.12  
## [13] evaluate_0.10</code></pre>
</div>
